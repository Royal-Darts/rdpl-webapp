<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Standings | Royal Darts Premier League 2025</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Navigation -->
  <nav id="main-nav" class="glass-nav">
    <div class="nav-logo">
      <img src="logo.png" alt="RDPL Logo" />
      <span>Royal Darts Premier League 2025</span>
    </div>
    <ul class="nav-links">
      <li><a href="index.html" class="nav-link">Home</a></li>
      <li><a href="fixtures.html" class="nav-link">Fixtures</a></li>
      <li><a href="results.html" class="nav-link">Results</a></li>
      <li><a href="standings.html" class="nav-link active">Standings</a></li>
      <li><a href="squads.html" class="nav-link">Squads</a></li>
      <li><a href="stats.html" class="nav-link">Stats</a></li>
      <li><a href="live.html" class="nav-link">Live</a></li>
    </ul>
  </nav>
  <main>
    <h1>Standings</h1>
    <div class="group-standings">
      <div>
        <h2>Group A</h2>
        <div id="standings-groupA">Loading...</div>
      </div>
      <div>
        <h2>Group B</h2>
        <div id="standings-groupB">Loading...</div>
      </div>
    </div>
  </main>
  <footer class="footer">
    <p>Built by SUCA Analytics</p>
    <a href="https://wa.me/?text=Check%20out%20the%20Royal%20Darts%20Premier%20League%202025%20website!" target="_blank" aria-label="Share on WhatsApp" class="whatsapp-share">
      <img src="whatsapp-icon.svg" alt="WhatsApp" />
    </a>
  </footer>
  <script>
    const API_URL = 'https://script.google.com/macros/s/AKfycby6BCE5cyBaxpz-Jt-TeRH6k5Jeq-vqelr8S7rt32e7wFjBzEvuBrYi4yPaEBz2Kari/exec';
    async function fetchJSON(url) {
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(`HTTP error ${res.status}`);
        return await res.json();
      } catch (err) {
        console.error('Fetch error:', err);
        return null;
      }
    }
    function createEl(type, classes = [], text = '') {
      const el = document.createElement(type);
      if (classes.length) el.classList.add(...classes);
      if (text) el.textContent = text;
      return el;
    }
    function renderTable(teams, elId) {
      const el = document.getElementById(elId);
      if (!teams.length) {
        el.textContent = "No data.";
        return;
      }
      const table = document.createElement('table');
      table.className = 'standings-table';
      table.innerHTML = `<thead>
        <tr>
          <th>Pos</th>
          <th>Team</th>
          <th>P</th>
          <th>W</th>
          <th>L</th>
          <th>LF</th>
          <th>LA</th>
          <th>LD</th>
          <th>Pts</th>
        </tr></thead><tbody>
        ${teams
          .sort((a,b)=>b.Points-a.Points)
          .map((team, idx) =>
            `<tr>
              <td>${idx + 1}</td>
              <td><img src="team_logos/${team.Team}.png" alt="${team.Team}" class="team-logo-sm"/> ${team.Team}</td>
              <td>${team.P}</td>
              <td>${team.W}</td>
              <td>${team.L}</td>
              <td>${team.LF}</td>
              <td>${team.LA}</td>
              <td>${team.LD}</td>
              <td>${team.Points}</td>
            </tr>`
          ).join('')}
      </tbody>`;
      el.innerHTML = "";
      el.appendChild(table);
    }
    async function loadStandings() {
      const data = await fetchJSON(API_URL);
      if (!data || !Array.isArray(data.Standings)) return;
      const groupA = data.Standings.filter(t => t.Group === 'A');
      const groupB = data.Standings.filter(t => t.Group === 'B');
      renderTable(groupA, 'standings-groupA');
      renderTable(groupB, 'standings-groupB');
    }
    document.addEventListener('DOMContentLoaded', loadStandings);
  </script>
  <style>
    .group-standings {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }
    .group-standings > div {
      flex: 1 1 350px;
      min-width: 220px;
    }
    .standings-table {
      width: 100%;
      border-collapse: collapse;
      color: #e1e8f0;
      margin-bottom: 1.5rem;
    }
    .standings-table th, .standings-table td {
      padding: 0.5rem 0.75rem;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .standings-table th { color: #f2c94c;}
    .team-logo-sm {
      height: 20px;
      width: auto;
      vertical-align: middle;
      margin-right: 0.5rem;
      filter: drop-shadow(0 0 1px rgba(0,0,0,0.7));
    }
    @media (max-width: 900px) {
      .group-standings { flex-direction: column; gap: 1rem;}
    }
  </style>
</body>
</html>
